<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />

    <title>Einf√ºhrung in React und Redux</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui"
    />
    <link rel="stylesheet" href="slides/styles.css" />
    <script src="slides/export.js"></script>
  </head>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section data-state="title">
          <h3><span class="transparent-bg">Web Developer Conference Hamburg</span></h3>
          <h2 class="title" style="font-size:7rem">
            <b>Einf√ºhrung in React und Redux</b>
          </h2>

          <h4>
            <span class="transparent-bg">
              <a href="http://nilshartmann.net" target="_blank">Nils Hartmann</a> |
              <a href="http://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
              |
              <a href="mailto:nils@nilshartmann.net" target="_blank">nils@nilshartmann.net</a>
            </span>
          </h4>

          <p style="margin-top:4rem"></p>
          <div>
            <h3><span class="transparent-bg">Vorbereitung</span></h3>
            <p>
              <span class="transparent-bg"
                >git clone https://github.com/nilshartmann/react-training</span
              >
            </p>
            <p><span class="transparent-bg">cd react-training</span></p>
            <p><span class="transparent-bg">npm install</span></p>
          </div>

          <p>
            <span class="transparent-bg">Slides: react-training/2019_react_wdc_hh.html</span>
          </p>
        </section>
        <section>
          <h3>Vorbereitung</h3>
          <ul>
            <li>git clone https://github.com/nilshartmann/react-training</li>
            <li>cd react-training</li>
            <li>npm install</li>
          </ul>
        </section>
        <section>
          <h3>Das Beispiel-Projekt</h3>
          <p>Workspace</p>
          <ul class="x-list">
            <li style="margin-bottom:40px">
              <code>2019_react_wdc_hh.html</code> Slides im Root-Verzeichnis
            </li>
            <li style="margin-bottom:40px">
              <code>code/<b>workspace</b></code
              >: Verzeichnis f√ºr Eure √úbungen<br />üëâ&nbsp;Empfehlung: dieses Verzeichnis in VS
              Code/IDE √∂ffnen
            </li>
            <li>
              <code>code/<b>material</b></code
              >: Code als Ausgangspunkt f√ºr √úbungen
            </li>
            <li>
              <code>code/<b>schritte</b></code
              >: Fertige St√§nde nach den einzelnen Teilen
            </li>
          </ul>
        </section>
        <section>
          <h2>Nils Hartmann</h2>
          <p>
            <a href="https://nilshartmann.net" target="_blank">https://nilshartmann.net</a> /
            <a href="http://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
          </p>
          <p><em>Freiberuflicher Entwickler, Architekt, Trainer aus Hamburg </em></p>

          <div style="display:flex;justify-content:center">
            <div style="margin-right:15px">
              <p>Java</p>
              <p>JavaScript, TypeScript</p>
              <p>React</p>
              <p>Single-Page-Anwendungen</p>
              <p>GraphQL</p>
            </div>

            <div style="margin-left:15px">
              <a href="https://www.dpunkt.de/buecher/13201/9783864905520-react.html"
                ><img style="max-height:450px" src="slides/images/react-buch-v2.jpg"
              /></a>
            </div>
          </div>
        </section>

        <section>
          <h2>Inhalt</h2>
          <ul style="font-size: 85%">
            <li>
              <a href="#/t1">Teil I: React Einf√ºhrung und ...</a>
            </li>
            <li>
              <a href="#/t2">Teil II: React-Komponenten (Grundlagen)</a>
            </li>
            <li>
              <a href="#/t3">Teil III: React-Komponenten: Details, Hierarchien und Anwendungen</a>
            </li>
            <li style="margin-bottom: 20px">
              <a href="#/t4">Teil IV: Daten lesen und schreiben vom Server</a>
            </li>

            <li>
              <a href="#/t-redux">Teil VIII: Externes Statemanagement mit Redux (√úberblick)</a>
            </li>
          </ul>
          <div style="font-size:80%">
            <p><b>Jederzeit:</b> Fragen und Diskussionen!</p>
          </div>
        </section>

        <section id="example-app">
          <h2>Beispiel-Anwendung</h2>
          <a target="_blank" href="code/schritte/7-redux/public/index.html">
            <img src="slides/images/greeting-master-and-detail.png" style="height:650px" />
          </a>
        </section>

        <section id="t1">
          <h1>Teil 1</h1>
          <h2>React-Einf√ºhrung</h2>
        </section>

        <section id="react">
          <h2>React</h2>
          <p>
            <a href="https://reactjs.org" target="_blank">https://reactjs.org</a>
          </p>
        </section>

        <section>
          <h2>React</h2>
          <ul>
            <li class="fragment">Minimales API</li>
            <li class="fragment">
              Minimales Feature Set
              <ul>
                <li>Ihr k√∂nnt/m√ºsst viele Entscheidungen selber treffen</li>
              </ul>
            </li>

            <li class="fragment">Bewusste Verst√∂√üe gegen Best-Practices</li>
          </ul>
        </section>

        <section>
          <h2>React</h2>
          <p><em>ist sehr stabil</em> (16.x seit September 2017!)</p>
          <ul>
            <li class="fragment">Semantische Versionierung</li>
            <li class="fragment">API √Ñnderungen meist abw√§rtskompatibel</li>
          </ul>
        </section>

        <section>
          <h3>Komponenten in React</h3>
          <p>
            <em>Zentrales Konzept in React: <b>Komponenten</b></em>
          </p>
          <img style="height:800px" class="fragment" src="slides/images/soc.png" />
        </section>

        <section>
          <h3>Komponenten in React</h3>
          <p style="font-size:smaller">Unser Beispiel in Komponenten</p>
          <img src="slides/images/greeting-example-component-hierarchy.png" style="height: 650px" />
        </section>

        <section>
          <h3>React Komponenten</h3>
          <ul>
            <li class="fragment">bestehen aus <b>Logik und UI</b></li>
            <li class="fragment">
              <b>keine Templatesprache</b>
            </li>
            <li class="fragment">werden <b>deklarativ</b> beschrieben</li>
            <li class="fragment">
              werden immer <b>komplett gerendert</b> (kein 2-Wege-Data-Binding)
            </li>
            <li class="fragment">werden zu <b>ganzen Anwendungen</b> aggregiert</li>
          </ul>
        </section>

        <section>
          <h3>React Komponenten</h3>
          <ul>
            <li class="fragment">
              Werden als <b>Funktion mit Hooks</b> oder <b>ES6 Klasse</b> implementiert
              <ul>
                <li>Hooks seit React 16.8 (Februar 2019)</li>
                <li>Klassen (noch?) sehr weit verbreitet in bestehendem Code</li>
              </ul>
            </li>

            <li class="fragment">
              Keine Templatesprache (stattdessen JavaScript)
              <ul>
                <li>Templates k√∂nnen HTML-artige Syntax enthalten (JSX)</li>
              </ul>
            </li>
          </ul>
        </section>

        <section>
          <h3>Eine erste Komponente: Hello, World!</h3>
          <p><a href="code/schritte/0-hello_world/public/index.html">Demo</a></p>
          <ul class="fragment">
            <li>Beispiel Schritt-f√ºr-Schritt (<code>code/workspace-live-coding</code>)</li>
          </ul>
        </section>

        <section>
          <h3>Hello World React</h3>
          <pre><code data-trim contenteditable>
import React from "react";

export default function HelloMessage(props) {
  const [name, setName] = React.useState(props.initialGreeting || "");

  return (
    &lt;div>
    &lt;input onChange={event => setName(event.target.value)} value={name} />

    &lt;p>{name}, World&lt;/p>
    &lt;button onClick={() => setName("")}>Clear&lt;/button>
    &lt;/div>
  );
}
          </code></pre>
        </section>

        <section>
          <h3>Aufruf</h3>
          <div class="fragment">
            <p>
              <code>index.html</code>
            </p>
            <pre><code data-trim contenteditable>
&lt;html>
  &lt;body>
    <div id="mount"></div>
  &lt;/body>
  &lt;script src="dist/main.js">&lt;/script>
&lt;/html>
</code></pre>
          </div>
          <div class="fragment">
            <p>
              <code>main.js</code>
            </p>
            <pre><code data-trim contenteditable class="javascript">
import React from 'react';
import ReactDOM from 'react-dom';

import HelloMessage from './HelloMessage';

const mountNode = document.getElementById('mount');
ReactDOM.render(&lt;HelloMessage initialGreeting="Hello"/>, mountNode);
</code></pre>
          </div>
          <p class="fragment">
            <a target="_blank" href="code/schritte/0-hello_world/public/index.html">Run</a>
          </p>
        </section>
        <section data-state="js-exkurs">
          <h2>Hintergrund: Tooling</h2>
        </section>

        <section data-state="js-exkurs">
          <h2>Webpack und Babel</h2>
          <img src="slides/images/webpack-und-babel.png" style="height:600px" />
        </section>
        <section data-state="js-exkurs">
          <h2>Webpack Development Server</h2>
          <ul>
            <li>Zum Ausf√ºhren der Anwendung wird ein Webserver ben√∂tigt</li>
            <li class="fragment">
              F√ºr die Entwicklung <b>Webpack Dev Server</b>:
              <ul>
                <li>...f√ºhrt Webpack auf Basis der Projekt Webpack Konfiguration aus</li>
                <li>...erzeugt Ausgabe in Memory (Performance)</li>
                <li>...Hot Reloading: Automatische Aktualisierung nach Code √Ñnderung</li>
              </ul>
            </li>
          </ul>
        </section>
        <section data-state="js-exkurs">
          <h3>create-react-app</h3>
          <a
            href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#table-of-contents"
            target="_blank"
            >User Guide</a
          >
          <p>Bootstrap von neuen React Anwendung</p>
          <p>Fertige Konfiguration von React und Webpack mit TypeScript, Sass, Linter</p>
          <p>Beispiel: npx create-react-app PROJEKTNAME --typescript</p>
        </section>
        <section data-state="js-exkurs">
          <h2>React Devtools</h2>
          <em>React Developer Tools f√ºr Chrome und Firefox</em>
          <p>Untersuchen der React Anwendung zur Laufzeit</p>

          <ul>
            <li>
              <a
                href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en"
                target="_blank"
                >Chrome</a
              >
            </li>
            <li>
              <a
                href="https://addons.mozilla.org/en-US/firefox/addon/react-devtools/"
                target="_blank"
                >Firefox</a
              >
            </li>
          </ul>

          <p><img src="slides/images/screenshot-react-dev-tools.png" /></p>
        </section>

        <section>
          <h3>Das Beispiel-Projekt</h3>
          <p>Workspace</p>
          <ul class="x-list">
            <li style="margin-bottom:40px">
              <code>2019_training_september.html</code> Slides im Root-Verzeichnis
            </li>
            <li style="margin-bottom:40px">
              <code>code/<b>workspace</b></code
              >: Verzeichnis f√ºr Eure √úbungen<br />üëâ&nbsp;Empfehlung: dieses Verzeichnis in VS
              Code/IDE √∂ffnen
            </li>
            <li>
              <code>code/<b>material</b></code
              >: Code als Ausgangspunkt f√ºr √úbungen
            </li>
            <li>
              <code>code/<b>schritte</b></code
              >: Fertige St√§nde nach den einzelnen Teilen
            </li>
          </ul>
        </section>

        <section>
          <h2>√úbung 1: React Hello-World</h2>
          <h3>
            <em>Mach dich mit den Werkzeugen vertraut und schreib deine erste React-Komponente</em>
          </h3>
        </section>
        <section>
          <h3>Schritt #1: Tool-Chain starten (falls noch nicht gemacht)</h3>

          <ol style="font-size: 85%">
            <li>
              <code>cd code/workspace</code>
            </li>

            <li>
              <code>npm start</code>
            </li>

            <li>
              √ñffne <a href="http://localhost:8080" target="_blank">http://localhost:8080</a> im
              Browser
            </li>

            <li>Wenn auf der Seite 'Hello, World' steht, ist alles gut</li>
          </ol>

          <img src="slides/images/screenshot-npm-start.png" />
        </section>
        <section>
          <h3>Schritt #2: Deine erste React-Komponente</h3>
          <ul>
            <li>
              Ersetze die "statische" Komponente (HelloMessage) mit der React-Komponente aus dem
              vorherigen Beispiel aus den Folien ("Hello World React")
            </li>

            <li class="todo">
              Entweder das Beispiel rausnehmen, oder mit zwei Eingabefeldern. In jedem Fall aber
              gleich mit GreetingDetail starten
            </li>
          </ul>
        </section>

        <section id="t2">
          <h1>Teil II</h1>
          <h2>React-Komponenten (Grundlagen)</h2>
          <a href="code/schritte/1-detail/public/index.html">Ziel-Anwendung</a>
        </section>

        <section>
          <h2>Dokumentation</h2>
          <p>
            <a href="https://reactjs.org/docs/hello-world.html">
              https://reactjs.org/docs/hello-world.html
            </a>
          </p>
        </section>

        <section>
          <h3>Themen</h3>
          <ul>
            <li>Rendering</li>
            <li>Properties und Zustand</li>
            <li>Referenzen auf DOM-Elemente (Refs)<span class="todo">raus?</span></li>
          </ul>
        </section>

        <section>
          <h3>React: Rendering</h3>
          <em>Eigene Komponenten m√ºssen mit einem Gro√übuchstaben anfangen!</em>
          <ul>
            <li>Komponentenname entspricht dem Klassennamen</li>
            <li>native Komponenten (button, div, input, ...) beginnen mit Kleinbuchstaben</li>
          </ul>
        </section>

        <section>
          <h3>Komponenten als Funktion</h3>
          <ul>
            <li class="fragment">Name der Funktion entspricht Name der Komponente</li>
            <li class="fragment">Properties werden per Parameter √ºbergeben (als Objekt)</li>
            <li class="fragment">
              Muss <b>genau ein</b> (Root-)Element zur√ºckgeben (oder null, false/true)
            </li>
            <li class="fragment">√úber Hooks kann Zustand verwendet werden</li>
            <li class="fragment">√úber Hooks kann am Lifecycle partizipiert werden</li>
          </ul>
        </section>

        <section>
          <h3>React: JSX</h3>
          <ul>
            <li style="font-size: 80%" class="fragment">
              Wird wie HTML hingeschrieben, inkl Attribute:
              <pre><code class="xml" contenteditable data-trim>
&lt;div>&lt;input type="text"/>&lt;/div>
                    </code></pre>
            </li>
            <li style="font-size: 80%" class="fragment">
              Achtung! <code>class</code>-Attribut hei√üt <code>className</code>:
              <pre><code class="xml" contenteditable data-trim>
                        &lt;h1 className="title">...&lt;/h1>
                    </code></pre>
            </li>
            <li style="font-size: 80%" class="fragment">
              Attribute, die keine Strings sind, m√ºssen in {} eingeschlossen werden:
              <pre><code class="xml" contenteditable data-trim>
&lt;Counter label="Count" count={7} showValues={true} />
                    </code></pre>
            </li>
            <li style="font-size: 80%" class="fragment">
              Kann pures JavaScript enthalten, eingeschlossen in {}:
              <pre><code class="xml" contenteditable data-trim>
const title = 'Hello, World';
&lt;h1>{title.toUpperCase()}&lt;/h1>
                    </code></pre>
            </li>

            <li style="font-size: 80%" class="fragment">
              CSS-Eigenschaften werden als Objekt √ºbergeben in Camel-Case-Notation:
              <pre><code class="xml" contenteditable data-trim>
const styles = { marginLeft: '10px', border: '1px solid red' };
&lt;h1 style={styles}>...&lt;/h1>
                    </code></pre>
            </li>
          </ul>
        </section>
        <section>
          <h3>React: JSX #2</h3>
          <ul>
            <li style="font-size: 80%" class="fragment">
              Zuweisen an Variablen
              <pre><code class="xml" contenteditable data-trim>
const counter = &lt;Counter label="..." />
                    </code></pre>
            </li>
            <li style="font-size: 80%" class="fragment">
              ...als Return-Wert:
              <pre><code class="xml" contenteditable data-trim>
function renderCounter(label) { return &lt;Counter label="..." />; }
                      </code></pre>
            </li>
            <li style="font-size: 80%" class="fragment">
              Fragmente (rendern selber kein Element in den DOM, nur ihre Kind-Elemente):
              <pre><code class="xml" contenteditable data-trim>
function Choice() { 
  return &lt;&gt;
    &lt;li>Yes&lt;/li> 
    &lt;li>No&lt;/li>
  &lt;/>              
}  
                    </code></pre>
            </li>
            <li style="font-size: 80%" class="fragment">
              null, false oder boolean, um nichts zu rendern:
              <pre><code class="xml" contenteditable data-trim>
function MyComponent() {
  if (!someCondition) {
    return null; // oder false oder true
  }

  return ...;
}              
                    </code></pre>
            </li>

            <li style="font-size: 80%" class="fragment">
              Kommentare
              <pre><code class="xml" contenteditable data-trim>
  function MyComponent() {
    return <div>
      { /* hier ist javascript, deswegen block-kommentare erlaubt */ }
    </div>;
  }              
                      </code></pre>
            </li>
          </ul>
        </section>

        <section>
          <h3>React: Properties und Zustand</h3>
          <ul class="fragment">
            <li>
              <b>Properties</b> werden der Komponente von <b>au√üen</b> √ºbergeben (und nicht
              ver√§ndert)
            </li>
            <li class="fragment">
              <b>Zustand (State)</b> ist eine <b>innere</b> Eigenschaft der Komponente (die
              ver√§ndert werden kann)
            </li>
          </ul>
        </section>

        <section>
          <h3>Properties ("Props") einer Komponente</h3>

          <ul>
            <li class="fragment">
              sind Objekte mit Key-Value-Paaren
            </li>
            <li class="fragment">
              werden als 1. Methoden-Parameter an Komponente √ºbergeben
            </li>
            <li class="fragment">d√ºrfen nicht ver√§ndert werden</li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
            function Header(props) {
                return (
                  &lt;h1 style={{color: props.titleColor}}>{props.title}&lt;/h1>
                );
              }
            }
            </code></pre>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
// Mit Destructuring
function Header({titleColor, title}) {
    return (
      &lt;h1 style={{color: titleColor}}>{title}&lt;/h1>
    );
  }
}
                </code></pre>
        </section>

        <section>
          <h3>Zustand einer Komponente: useState-Hook</h3>
          <ul>
            <li>Beispiel: Inhalt eines Eingabefelds, Daten vom Server, Menu offen oder zu</li>
            <li class="fragment"><b>Werte</b> √ºblicherweise immutable</li>
            <li class="fragment">Arbeiten mit Zustand √ºber <b>useState</b>-Hook</li>
            <li class="fragment">
              useState liefert Array mit zwei Werten zur√ºck: aktuellen Zustand, und setter-Funktion
              um Zustand zu ver√§ndern
            </li>
          </ul>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
function GreetingDetail(props) {
  const [greeting, setGreeting] = React.useState(props.initialGreeting);

  return &lt;input onChange={e => setGreeting(e.target.value) value={greeting} />;
}
                  </code></pre>
          <ul>
            <li class="fragment">
              Aufruf des Setters <b>l√∂st erneutes rendern der <i>gesamten</i> Komponente aus</b>
            </li>
            <li class="fragment">
              Es k√∂nnen mehrere States erzeugt werden, durch Verwendung mehrerer useState-Aufrufe
            </li>
            <li class="fragment">
              <b>Zustand</b> ist eines der <b>zentralen</b> Konzepte von React
            </li>
          </ul>
        </section>
        <section>
          <h3>React Hooks</h3>
          <em>Mit React Hooks kann sich eine Komponente in Zustand und Lebenszyklus "einhaken"</em>
          <ul>
            <li class="fragment">Vorgestellt Ende 2018, eingef√ºhrt mit React 16.8 (Feb 2019)</li>
            <li class="fragment">
              "Normale" Funktionen, m√ºssen aber mit <code>use</code> beginnen (useState, useEffect,
              ...)
            </li>
            <li class="fragment">Es k√∂nnen eigene Hooks gebaut werden ("custom hooks")</li>
            <li class="fragment">
              Importieren und verwenden von Hooks

              <pre><code class="javascript" contenteditable data-trim>
                import React from "react";

                function GreetingDetail(props) {
                  const [greeting, setGreeting] = React.useState(props.initialGreeting);
                  // ...
                }
                                  </code></pre>
              <pre class="fragment"><code class="javascript" contenteditable data-trim>
                                      import React, { useState } from "react";
                      
                                      function GreetingDetail(props) {
                                        const [greeting, setGreeting] = useState(props.initialGreeting);
                                        // ...
                                      }
                                                        </code></pre>

              <ul>
                <li class="fragment">
                  (<code>React</code> muss immer <b>importiert</b> werden, wenn JSX verwendet wird!)
                </li>
              </ul>
            </li>
          </ul>
        </section>
        <section>
          <h3>React Hooks</h3>
          <em>Es gibt einige Regeln zu beachten, bei der Verwendung von Hooks üëÜ</em>
          <p style="font-size:75%;margin-top:0">
            <a href="https://reactjs.org/docs/hooks-rules.html"
              >(https://reactjs.org/docs/hooks-rules.html)</a
            >
          </p>
          <div class="fragment">
            <p>Einschr√§nkungen:</p>
            <ul>
              <li class="fragment">
                Hooks k√∂nnen nur in Funktionskomponenten (und anderen Hooks) aufgerufen werden
              </li>
              <li class="fragment">
                Hooks m√ºssen immer in derselben Reihenfolge und auf Top-Level-Ebene verwendet werden
                <ul>
                  <li>Verboten z.B. in Schleifen, if-Abfragen oder in anderen Funktionen</li>
                </ul>
              </li>
              <li class="fragment">
                Es gibt ein
                <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks">ESLint Plug-in</a>
                zur korrekten Verwendung der Hooks
              </li>
            </ul>
          </div>
          <p class="fragment">
            <em
              >Der Hooks-Mechanismus basiert intern darauf, dass React sich die Reihenfolge der
              <code>useXyz</code>-Aufrufe merkt!</em
            >
          </p>
        </section>
        <section>
          <h3>React Hooks</h3>

          <em>Beispiele f√ºr korrekte und unerlaubte Verwendung</em>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
              // ERLAUBT:
              function GreetingDetail(props) {
                const [greeting, setGreeting] = React.useState(props.initialGreeting);
                const [name, setName] = React.useState(props.initialName);
                // ...
              }
                                </code></pre>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                                    // ERLAUBT:
                                    function GreetingDetail(props) {
                                      const [greeting, setGreeting] = React.useState(props.initialGreeting);
                                      const uppercaseGreeting = greeting.toUpperCase(); 
                                      const [name, setName] = React.useState(props.initialName);
                                      // ...
                                    }
                                                      </code></pre>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                                    // VERBOTEN:
                                    function GreetingDetail(props) {
                                      const [greeting, setGreeting] = React.useState(props.initialGreeting);
                                      if (greeting !== null) {
                                        const [name, setName] = React.useState(props.initialName);
                                      }
                                      // ...
                                    }
                                                      </code></pre>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                          // VERBOTEN:
                          function GreetingDetail(props) {
                            const [greeting, setGreeting] = React.useState(props.initialGreeting);
                            if (greeting === null) {
                              return <h1>Please enter greeting first</h1>;
                            }
                            // ...
                          }
                                            </code></pre>
        </section>
        <section>
          <h3>React Hooks</h3>
          <em>Beispiele f√ºr korrekte und unerlaubte Verwendung #2</em>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
              // VERBOTEN 
              function GreetingDetail(props) {
                function initState() {
                  return React.useState(props.initialGreeting);
                }
                const [greeting, setGreeting] = initState();
              }
            </code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                // VERBOTEN (initState ist 'normale' Funktion)
                function initState() {
                  return React.useState(props.initialGreeting);
                }

                function GreetingDetail(props) {
                  // w√§re erlaubt, wenn initState 'useInitState' hie√üe
                  const [greeting, setGreeting] = initState();
                }
              </code></pre>
        </section>

        <section>
          <h3>Render Zyklus</h3>
          <img src="slides/images/event-zustand-render.png" height="550px" />
        </section>

        <section>
          <h3>Virtual DOM</h3>
          <p>"Rendern" hat leider doppelte Bedeutung!</p>
          <img src="slides/images/virtual-dom.png" style="height:650px" />
        </section>

        <section>
          <h2>√úbung 2: Detail-Ansicht f√ºr unsere Gru√ü-Anwendung</h2>
          <em
            ><b
              >Erzeuge eine Komponente mit der man einen Namen und eine Gru√üformel eingeben kann</b
            ></em
          >
        </section>
        <section>
          <h3>Schritte</h3>
          <h4>Erweitere deine erste React-Komponente im workspace-Ordner</h4>
          <ol class="x-list">
            <li>
              benenne deine HelloMessage-Komponente (und das HelloMessage-Modul) in
              <code>GreetingDetail</code> um
            </li>

            <li>
              du brauchst zwei Eingabefelder, die <code>name</code> und <code>greeting</code> im
              Zustand der Komponente setzen
            </li>

            <li>
              Erweitere deine Komponente so, dass man von au√üen Properties √ºbergeben kann, die den
              Zustand initialisieren (<code>initialGreeting</code> und <code>initialName</code>)
            </li>
            <li>
              F√ºge einen "Clear"-Button hinzu, der den Inhalt beider Eingabefelder l√∂scht. Das
              entsprechende Event auf dem Button hei√üt <code>onClick</code>. <br />Nach dem L√∂schen
              der Eingabefelder sollte der Focus auf das erste Eingabefeld (<code>name</code>)
              gesetzt werden
            </li>
            <li>
              REFERENZ F√úR FOCUS:
              <pre><code>const inputRef = React.useRef();
function clear() { set...(); inputRef.current.focus(); }              
// ...
&lt;input type="..." ref={inputRef} ... />
&lt;button onClick={clear}>Clear&lt;/button>                
              </code></pre>
            </li>
          </ol>
        </section>

        <section id="t3">
          <h1>Teil III</h1>
          <h2>React-Komponenten: Details, Hierarchien und Anwendungen</h2>
          <a href="code/schritte/2-hierarchy/public/index.html" target="_blank">Ziel-Anwendung</a>
        </section>

        <section>
          <h3>Themen</h3>
          <ul>
            <li>Darstellung von Listen</li>
            <li>Architektur-Idee: Controller-Komponente und View-Komponente</li>
            <li>Durchreichen von Zustand und Callbacks</li>
            <li>Komponenten als Klassen</li>
          </ul>
        </section>

        <section>
          <div style="display: flex">
            <div style="flex: 1">
              <img src="slides/images/greeting-master-table.png" style="max-width:100%" />
            </div>
            <div style="flex: 1">
              <h3>Listen</h3>
              <div
                class="fragment"
                style="display: flex; flex-direction: column; justify-content: center;align-items: center"
              >
                <p>JSX bietet nichts f√ºr Listen</p>
                <p>
                  Ausgabe typischerweise √ºber
                  <code>Array.map()</code>
                </p>
                <p>Elemente einer Liste brauchen einen eindeutigen Key</p>

                <pre class="fragment"><code class="javascript" contenteditable data-trim>
const greetings = [
  { id: 0, name: 'Klaus', greeting: 'Hallo' },
  { id: 1, name: 'Susi', greeting: 'Moin' }
];

const GreetingsTable(props) => (
    &lt;table>
      {props.greetings.map(greeting =>
        &lt;tr key={greeting.id}>
            &lt;td>{greeting.name}&lt;/td>
            &lt;td>{greeting.greeting}&lt;/td>
        &lt;/tr>
      )}
    &lt;/table>
);
</code></pre>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3>Teil III (b)</h3>
          <h2>Anwendungen und Komponentenhierarchien</h2>
        </section>
        <section>
          <h3>Problem: Kommunikation zwischen Komponenten</h3>
          <p>#1: Welche Komponente soll angezeigt werden (Master oder Detail?)</p>
          <img src="slides/images/component-hierarchy-problems-01-views.png" style="height:550px" />
        </section>
        <section>
          <h3>Problem: Kommunikation zwischen Komponenten</h3>
          <p>#2: Wo wird der State (Greetings) verwaltet?</p>
          <img
            src="slides/images/component-hierarchy-problems-02-greeting.png"
            style="height:550px"
          />
        </section>
        <section>
          <h3>Problem #1</h3>
          <h2>Welche Komponente soll angezeigt werden?</h2>
          <p>Master oder Detail?</p>
          <p>Schritt-f√ºr-Schritt in <code>code/workspace-live-coding</code></p>
        </section>
        <section>
          <h3>Controller Komponente #1</h3>
          <p>Verwaltet den Zustand (u.a. welche Komponente sichtbar ist)</p>
          <img src="slides/images/greeting-hierarchy-mode.png" style="height:550px" />
        </section>
        <section>
          <h3>Controller Komponente #2</h3>
          <p>Rendering der Children</p>
          <pre><code class="javascript" contenteditable data-trim>
function GreetingController(props) {
  const [mode, setMode] = React.useState(MODE_MASTER);

  if (mode === 'MASTER') {
    return &lt;GreetingMaster />;
  } 

  return &lt;GreetingDetail />;
}            
            </code></pre>
        </section>

        <section>
          <h3>Controller Komponente</h3>
          <p class="fragment">Wie wird zwischen den Komponenten kommuniziert?</p>
          <p class="fragment">Beispiel: Child-Komponente will Parent Informationen √ºbermitteln</p>
          <p class="fragment">Callback-Funktionen als Properties #1</p>
          <img
            class="fragment"
            src="slides/images/greeting-hierarchy-mode-callback.png"
            style="height:550px"
          />
        </section>

        <section>
          <h3>Controller Komponente</h3>
          <p>Kommunikation mit Children: Callback-Funktionen als Properties #2</p>
          <pre><code class="javascript" contenteditable data-trim>
function GreetingController(props) {
  const [mode, setMode] = React.useState('MASTER');

  if (mode === 'MASTER') {
    return &lt;GreetingMaster onAdd={() => setMode('DETAIL')} />;
  } 

  return &lt;GreetingDetail onSave={() => setMode('MASTER')} />;
}      

  
</code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
  function GreetingMaster(props) {
      return (
        // Tabelle mit Greetings ...
        &lt;button onClick={props.onAdd}>Add&lt;/button>
      )
  }            
              </code></pre>
        </section>

        <section>
          <h3>Problem #2</h3>
          <h2>Wo wird der State (Greetings) verwaltet?</h2>
          <p>Wie kommen neue Greetings (GreetingDetail) in die Liste (GreetingMaster)?</p>
        </section>
        <section>
          <h3>Controller Komponente</h3>
          <p class="fragment">Verwaltet den "globalen" State</p>
          <p class="fragment">State wird als Property an Children √ºbergeben</p>
          <img
            class="fragment"
            src="slides/images/greeting-hierarchy-greetings.png"
            style="height:550px"
          />
        </section>
        <section>
          <h3>Controller Komponente</h3>
          <p>State wird als Property an Children √ºbergeben #2</p>
          <pre><code class="javascript" contenteditable data-trim>
function GreetingController(props) {
  const [mode, setMode] = React.useState('MASTER');
  const [greetings, setGreetings] = React.useState(props.initialGreetings);

  if (mode === 'MASTER') {
        return &lt;GreetingMaster
          greetings={greetings}
          onAdd={() => setMode('DETAIL')}
        />
  }
  // ...
}
  </code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
function GreetingMaster(props) {
    return (
      &lt;table>
        { props.greetings.map(g => &lt;tr>...&lt;/tr>) }
      &lt;/table>
      &lt;button onClick={props.onAdd}>Add&lt;/button>
    )
}            
                </code></pre>
        </section>
        <section>
          <h3>Controller Komponente</h3>
          <p class="fragment">Verwaltet den "globalen" State</p>
          <div class="fragment">
            <img src="slides/images/greeting-hierarchy-onsave.png" style="height:550px" />
            <p>
              <span style="color: #9D4493">Neues Greeting</span> wird per Callback-Funktion zur√ºck
              gegeben
            </p>
          </div>
        </section>
        <section>
          <h3>Controller Komponente</h3>
          <p>Neues Greeting wird per Callback-Funktion √ºbergeben #2</p>
          <pre><code class="javascript" contenteditable data-trim>
  function GreetingController(props) {
    const [mode, setMode] = React.useState('MASTER');
    const [greetings, setGreetings] = React.useState(props.initialGreetings);

    if (mode === 'MASTER') {
      // ...
    }

    return &lt;GreetingDetail 
      onSave={newGreeting => {
        setGreetings: [...greetings, newGreeting];
        setMode('MASTER');
      }} 
    />;
  }      
    </code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
  function GreetingDetail(props) {
    const [name, setName] = React.useState();
    const [greeting, setGreeting] = React.useState();
      return (
        &lt;input name="name" . . . />
        &lt;input name="greeting" . . . />
        &lt;button onClick={() => props.onSave({name: name, greeting: greeting})}>
          Add
        &lt;/button>
      )
  }            
                  </code></pre>
        </section>

        <section>
          <h3>Komponenten in Hierarchien</h3>
          <p>Beispiel: Unsere Anwendung (Zusammenfassung)</p>
          <img src="slides/images/greeting-hierarchy.png" style="height:550px" />
        </section>

        <section>
          <h3>Smart und Dumb Components</h3>
          <p style="font-size: smaller;margin-bottom:0">
            (Alternativ: Container und Presentation Components)
          </p>
          <img
            style="margin-top:0;max-height:600px"
            src="slides/images/component-communication.png"
          />
        </section>

        <section>
          <h2>√úbung 3: Eine komplette Anwendung zusammen setzen</h2>
          <p>
            <em>
              F√ºge deinen bestehenden Detail-View <code>GreetingDetail</code> und einen Master-View
              √ºber eine Controller-Komponente zusammen</em
            >
          </p>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol>
            <li>
              kopiere das Material aus <code>code/material/2-hierarchy</code> in deinen src-Ordner
              <span style="font-size:85%"
                >(oder dein fertiges <code>GreetingDetail</code> verwenden)</span
              >
            </li>

            <li>
              erweitere den <code>GreetingController</code>, so dass dein
              <code>GreetingDetail</code> angezeigt wird, wenn der Benutzer den Add-Button klickt:
              <ul>
                <li>
                  dort gibt es bereits einen Kommentar, der dir die richtige Stelle anzeigt und
                  weitere Details enth√§lt
                </li>
                <li>√ºbergib einen Callback der <code>addGreeting</code> nutzt</li>
              </ul>
            </li>
            <li>
              im deinem <code>GreetingDetail</code> brauchst du einen neuen Knopf, der mit dem neuen
              Gru√ü den Callback aufruft
            </li>
          </ol>
        </section>
        <section>
          <h3>GreetingMaster</h3>
          <img src="slides/images/greeting-master.png" style="border:0;box-shadow:0 0 0 0" />
        </section>
        <section>
          <h3>GreetingDetail</h3>
          <img src="slides/images/greeting-detail.png" style="border:0;box-shadow:0 0 0 0" />
        </section>

        <section>
          <h3>R√ºckblick: Komponenten als Klassen</h3>

          <p>Statt <b>useState</b>: State als this.state und this.setState()</p>
          <p>Properties als this.props</p>

          <pre><code data-trim contenteditable>
      import React from "react";
      
      export default class GreetingDetail extends React.Component {
      
        constructor(props) {
          super(props);
      
          this.state = {
            name: props.initialName,
            greeting: props.initialGreeting
          };
        }
      
        render() {
          return (
            &lt;div>
              &lt;input 
                value={this.state.name} 
                onChange=
                  {event => this.setState({name: event.target.value})}
              />
              &lt;input 
                    value={this.state.greeting} 
                    onChange=
                      {event => this.setState({greeting: event.target.value})}
              />
            &lt;/div>
          );
        }
      }</code></pre>
        </section>

        <section id="t4">
          <h1>Teil IV</h1>
          <h2>Daten lesen und schreiben vom Server</h2>
          <a href="code/schritte/3-remote/public/index.html" target="_blank">Ziel-Anwendung</a>
        </section>

        <section>
          <h3>Herausforderungen</h3>
          <ol>
            <li>Wie machen wir das Laden und Speichern technisch?</li>
            <li>Wo steht der Code zum initialen Laden der Gr√º√üe? (beim Start der Anwendung)</li>
            <li>Wo speichern wir?</li>
            <li>Wie funktioniert asynchrone Verarbeitung in React?</li>
          </ol>
        </section>

        <section>
          <h3>Server-Calls</h3>
          <ul>
            <li>React macht keine Angabe, wie Server-Calls (technisch) gemacht werden</li>
            <li class="fragment">
              H√§ufig in React verwendet: <b>fetch</b> API
              <ul>
                <li>Browser-API zum Ausf√ºhren von HTTP Requests</li>
                <li>
                  <a href="http://caniuse.com/#search=fetch" target="_blank">hohe Verbreitung</a>
                </li>
                <li>
                  Spezifikation:
                  <a href="https://fetch.spec.whatwg.org/" target="_blank"
                    >https://fetch.spec.whatwg.org/</a
                  >
                </li>
                <li>
                  Polyfill:
                  <a href="https://github.com/github/fetch" target="_blank"
                    >https://github.com/github/fetch</a
                  >
                </li>
              </ul>
            </li>
            <li class="fragment">
              Popul√§re Alternative: <a href="https://github.com/axios/axios">Axios</a> (<a
                href="https://www.reddit.com/r/javascript/comments/cp5qhm/askjs_the_sad_state_of_axios/"
                >Project tot?</a
              >)
            </li>
          </ul>
        </section>
        <section>
          <h3>Beispiel: fetch</h3>
          <p>Daten lesen per GET</p>
          <pre><code class="javascript" contenteditable data-trim>
          // F√ºr GET Zugriff reicht es, die URL anzugeben:
          try {
            const response = await fetch('http://localhost:7000/api/greetings')
            const json = await response.json();
            // ...
          } (catch ex) {
            console.error('request failed', ex)
          }
          </code></pre>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
// Alternative mit Promise:

fetch('http://localhost:7000/api/greetings')
  .then(response => response.json())
  .then(json => /* ... */)
  .catch(ex => console.error('request failed', ex));
</code></pre>
        </section>
        <section>
          <h3>Beispiel #2: fetch</h3>
          <p>Daten lesen per POST</p>
          <div class="fragment">
            <p>
              <code>fetch</code> erwartet als zweiten Parameter ein Objekt mit
              Konfigurationsparametern, u.a:
            </p>

            <ul>
              <li>
                <code>method</code>: gibt die HTTP Methode an ( <code>PUT</code>, <code>POST</code>,
                <code>DELETE</code>, ...)
              </li>
              <li><code>headers</code>: Objekt mit HTTP Headern f√ºr den Request</li>
              <li><code>body</code>: Der Request-Payload (als String)</li>
            </ul>
          </div>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
const response = await fetch(url, {
  method: 'POST',
  headers: {
    'Accept': 'application/json',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify(payload)
})
// ... 
    </code></pre>
        </section>

        <section>
          <h3>fetch im Detail</h3>

          <pre><code class="javascript" contenteditable data-trim>
  try {
    // 1. fetch gibt ein Promise zur√ºck, dass mit dem
    // Response-Objekt aufgel√∂st wird, wenn die Antwort vom Server
    // kommt
    const response = await fetch('http://localhost:7000/greetings');
  
    // 2. das Response Objekt enth√§lt eine json() Funktion,
    // die das geparse JSON aus der Antwort zur√ºckliefert
    const greetings = await response.json();
  
    // WAS MACHEN WIR MIT DER ANTWORT?
    // ???
  } catch (err) {
    // 4. Falls etwas schief geht, Fehler loggen
    console.error('request failed', err);
  }
  
  </code></pre>
          <p>
            <a href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API">Fetch API Doku</a>
          </p>
        </section>

        <section>
          <h3>Wann werden Daten gelesen und geschrieben?</h3>

          <p>Wann m√ºssen die Daten in der Greeting-Anwendung <b>gelesen</b> werden?</p>
        </section>

        <section>
          <h3>Initiales Laden von Daten</h3>

          <p>
            Schritt-f√ºr-Schritt (<code
              >code/workspace-live-coding, vorher schritte/2-hierarchy reinkopieren</code
            >)
          </p>
        </section>

        <section>
          <h3>useEffekt-Hook</h3>
          <em
            >Der useEffekt-Hook erlaubt es Seiteneffekte zu definierten Zeitpunkten auszuf√ºhren</em
          >
          <ul>
            <li class="fragment">
              Zeitpunkte: nach initialem Rendern der Komponente, nach Rendern durch Aktualisierung
              und nach dem Entfernen aus dem DOM
            </li>
          </ul>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
            function GreetingController(props) {
              React.useEffect( 
                () => console.log("Ich werde nach JEDEM Rendern ausgef√ºhrt")
              );
            }
          </code></pre>

          <div class="fragment">
            2. Parameter (Array) gibt an, wann der Effekt ausgef√ºhrt werden soll:

            <pre class="fragment"><code class="javascript" contenteditable data-trim>
              function GreetingController(props) {
                React.useEffect( 
                  () => console.log("Ich werde nur nach 1. Rendern ausgef√ºhrt"),
                  []
                );
              }
            </code></pre>
          </div>

          <div class="fragment">
            Nur nach 1. Rendern ausf√ºhren, und wenn sich das greetingId-Prop √§ndert:

            <pre class="fragment"><code class="javascript" contenteditable data-trim>
                function GreetingController(props) {
                  React.useEffect(
                    () => console.log("..."), 
                    [props.greetingId]) 
                  );
                }
              </code></pre>
          </div>
        </section>

        <section>
          <h3>useEffect Hook</h3>

          <p>Zwei Parameter:</p>
          <ul>
            <li class="fragment">
              Callback-Funktion, die aufgerufen wenn entsprechendes Ereignis eintritt (z.B.
              initiales Rendern abgeschlossen)
            </li>
            <li class="fragment">
              Ein Array mit Abh√§ngigkeiten:
              <ul>
                <li class="fragment">
                  Wenn kein Array angegeben wird, wird der Effekt nach jedem Rendern ausgef√ºhrt
                  (achtung! Endlosschleife m√∂glich)
                </li>
                <li class="fragment">
                  Wenn ein leeres Array angegeben wird, wird der Effekt nur nach dem 1. Rendern
                  ausgef√ºhrt
                </li>
                <li class="fragment">
                  Wenn Werte angegeben werden, wird der Effekt ausgef√ºhrt, wenn sich mind 1 Wert
                  ver√§ndert hat
                </li>
              </ul>
            </li>
          </ul>

          <p class="fragment">
            Um auf das Entfernen der Komponente aus dem DOM zu reagieren (z.B Resourcen freigeben),
            kann die Callback-Funktion eine weitere Funktion zur√ºckliefern, die dann ausgef√ºhrt
            wird:
          </p>

          <pre class="fragment"><code class="javascript" contenteditable data-trim>
                  function GreetingController(props) {
                    React.useEffect(
                      () => {
                        console.log("greetingId hat sich ge√§ndert"); 
                        return () => console.log("Ich bin entfernt worden") 
                      },
                      [props.greetingId])
                    );
                  }
                </code></pre>
        </section>

        <section>
          <h3>Initiales Laden von Daten</h3>

          <div>
            <p>
              <code>useEffect</code> und (<code>useState</code>) werden verwendet um Daten nach dem
              1. Rendern zu laden:
            </p>
            <pre><code class="javascript" contenteditable data-trim>
                function GreetingController() {
                  const [mode, setMode] = React.useState(MODE_MASTER);
                  const [greetings, setGreetings] = React.useState([]);
                
                  React.useEffect(() => {
                    async function loadGreetings() {
                      let greetings = null;
                      try {
                        const response = await fetch(BACKEND_URL);
                        greetings = await response.json();
                      } catch (err) {
                        console.error("LOADING GREETINGS FAILED:", err);
                        return;
                      }
                      setGreetings(greetings);
                    }
                
                    loadGreetings();
                  }, []);

                  // ...
                }
                
                </code></pre>
          </div>
        </section>

        <section>
          <h3>Wann werden Daten gelesen und geschrieben?</h3>

          <p>Wann m√ºssen die Daten in der Greeting-Anwendung <b>gespeichert</b> werden?</p>
        </section>

        <section>
          <h3>Speichern von Daten</h3>
          <p>Zum Beispiel als Folge einer Benutzerinteraktion:</p>
          <p class="fragment">Im Event-Handler sind wir nicht in der Render-Phase!</p>
          <pre class="fragment"><code class="javascript" contenteditable data-trim>
function GreetingController {
  async function addGreeting(greetingToBeAdded) {
    let newGreeting;
    try {
      const response = await fetch(BACKEND_URL, {
        method: "POST",
        headers: {
          Accept: "application/json",
          "Content-Type": "application/json"
        },
        body: JSON.stringify(greetingToBeAdded)
      });
      if (response.status !== 201) {
        throw new Error("Invalid status code: " + response.status);
      }
      newGreeting = await response.json();
    } catch (err) {
      console.error("LOADING GREETINGS FAILED:", err);
    }
    // add the new greetings to the list of all greetings
    // (create a new array for immutability)
    // use updater function (in setGreetings) to make sure
    // we get the latest 'greetings' value from state
    setGreetings(currentGreetings => [...currentGreetings, newGreeting]);
    setMode(MODE_MASTER);
  }
  return
    ...
      &lt;GreetingDetail onSave={newGreeting => addGreeting(newGreeting)} />
    ...
}
                </code></pre>
        </section>

        <section>
          <h2>√úbung: Laden und Speichern der Daten von/auf einem Server</h2>
          <p>
            <em
              >Entwickle auf Basis von fetch eine Version des GreetingControllers, der die Daten auf
              dem Server laden und dort wieder speichern kann</em
            >
          </p>
          <p>
            Der Server ist bereits fertig. Zum Starten:
          </p>
          <pre><code>
                cd react-training/code/server
                npm start
              </code></pre>
          <p>Der Server ist √ºber Port 7000 erreichbar</p>
          <p>
            Zum Testen:
            <a href="http://localhost:7000/greetings">http://localhost:7000/greetings</a>
          </p>
        </section>
        <section>
          <h3>Schritte</h3>
          <ol class="x-list">
            <li class="fragment">
              Kopiere <code>code/material/3-remote/GreetingController.js</code> in deinen
              Arbeitsbereich
            </li>

            <li class="fragment">
              Die Serverzugriffe sollen in <code>loadGreetings</code> und
              <code>saveGreeting</code> erfolgen
              <ul>
                <li>Dort sind bereits entsprechende TODOs f√ºr dich eingetragen</li>
                <li>
                  Die URL des Backends steht in der Konstante <code>BACKEND_URL</code>. <br /><code
                    >const BACKEND_URL = "http://localhost:7000/greetings";</code
                  >
                </li>
              </ul>
            </li>
          </ol>
        </section>

        <section id="t-redux">
          <h1>Teil VIII</h1>
          <h1>Zustands-Management mit Redux</h1>
        </section>

        <section>
          <h2>Eine typische React-Anwendung in Komponenten</h2>
          <h3>Frage an Euch: was k√∂nnte es f√ºr Probleme geben?</h3>
          <img src="slides/images/typische-react-komponenten-hierarchie.png" style="height:650px" />
        </section>

        <section>
          <h3>Problem 1: √úber Komponenten verteilter Zustand</h3>
          <img src="slides/images/verteilter-zustand.png" style="height:650px" />
          <p>Wo muss ich nach Fehlern suchen? Wo ist die Logik?</p>
        </section>

        <section>
          <h3>Problem 2: Getrennte Komponentenhierarchien</h3>
          <img src="slides/images/zwei-komponenten-hierarchien.png" style="height:650px" />
          <p>Geht entweder nicht oder "Gott-Komponente" entsteht</p>
        </section>

        <section>
          <h3>Problem 3: Gemeinsamer ("globaler") Zustand</h3>
          <img src="slides/images/gemeinsam-genutzter-state.png" style="height:650px" />
          <p>Wie kommt Zustand von ganz oben nach ganz unten?</p>
        </section>

        <section>
          <h3>Problem 4: UI und Logik vermischt</h3>
          <img src="slides/images/ui-und-logic-vermischt.png" style="height:650px" />
          <p>Wiederverwendung? React-unabh√§ngigkeit? Testbarkeit?</p>
        </section>

        <section>
          <h3>External Statemanagement</h3>
          <div class="fragment">
            <p>Habt ihr Ideen?</p>
            <p>Wie k√∂nnen wir Zustand und/oder Logik aus den Komponenten befreien?</p>
          </div>
        </section>

        <section>
          <h2>Redux</h2>
          <h3>External Statemanagement</h3>
        </section>

        <section>
          <h3>Wiederholung</h3>
          <h2>Render Cycle in Pure React</h2>
          <img src="slides/images/redux-01-react-cycle-no-redux.png" style="height:650px" />
        </section>

        <section>
          <h2>Redux extrahiert die Verantwortlichkeiten</h2>
          <img src="slides/images/redux-02-extracting-responsibility.png" style="width: 900px" />
        </section>
        <section>
          <h2>Demo: Redux & Redux Devtools</h2>
          <a href="http://localhost:8080/" target="_blank">Ziel-Anwendung</a>
          <p>(npm start in code/schritte/redux/7-redux-complete-app)</p>
        </section>

        <section>
          <h2>Strukturierter √úberblick √ºber alle Redux Teile</h2>
        </section>

        <section>
          <h3>Event-Handlers werden Action-Creators</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
export function setFilter(filter) {
  return {
    type: SET_FILTER,
    filter
  };
}
</code></pre>
          <ul>
            <li class="fragment">Action-Creators erzeugen Action-Objekte</li>
            <li class="fragment">
              Actions sind Kommando-artige Strukturen von Dingen, die die Applikation tun soll
            </li>
            <li class="fragment">
              √úber die dispatch-Methode des Stores werden sie an <em>alle</em> Reducer weiter
              gegeben
            </li>
            <li class="fragment">
              Actions bestehen aus einem Typen und einer beliebigen Nutzlast (payload)
            </li>
          </ul>
        </section>

        <section>
          <h3>Action-Creators machen Server-Calls</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
export const loadGreeting = greetingId => dispatch => {
fetch(BACKEND_URL+'/'+greetingId)
    .then(response => response.json())
    .then(greetings => dispatch({
        type: SET_GREETINGS,
        greetings
    });
};
</code></pre>
          <ul>
            <li class="fragment">
              Die Action wird nicht direkt zur√ºck geliefert, sondern erst sp√§ter dispatched
            </li>
            <li class="fragment">
              wir bekommen die dispatch Methode als Parameter, mit der wir sp√§ter die Action
              dispatchen
            </li>
          </ul>
          <p class="fragment">
            <strong
              >Action-Creators sind die einzigen Teile einer Redux-Anwendung, die asynchrone
              Operationen ausf√ºhren d√ºrfen</strong
            >
          </p>
        </section>

        <section>
          <h3>Ein <em>einziger</em> Store h√§lt den <em>kompletten</em> Zustand</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import { Provider } from 'react-redux';
import { createStore } from 'redux';
import { rootReducer } from './reducers';

// http://redux.js.org/docs/api/createStore.html
const store = createStore(
rootReducer // reducer
);
ReactDOM.render(
&lt;Provider store={store}>
    &lt;GreetingController />
&lt;/Provider>,
mountNode
);
    </code></pre>
          <ul>
            <li class="fragment">Zentraler Teil der Anwendung</li>
            <li class="fragment">Liefert die bereits bekannte dispatch-Methode</li>
            <li class="fragment">
              Der Store wird allen Componenten √ºber die Wrapper-Komponenten <em>Provider</em>
              zur Verf√ºgung gestellt
            </li>
          </ul>
        </section>

        <section>
          <h3>Middleware zwischen Dispatch und Store</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import { applyMiddleware } from 'redux';
import thunk from 'redux-thunk';

const store = createStore(
  rootReducer, // reducer
  applyMiddleware(thunk) // middleware as enhancer
);
    </code></pre>
          <ul>
            <li class="fragment">Die Thunk Middleware dient als de-facto-Standard</li>
            <li class="fragment">
              Gibt die dispatch-Methode and (asynchrone) Action Creators weiter
            </li>
            <li class="fragment">
              <a href="https://github.com/gaearon/redux-thunk#whats-a-thunk" target="_blank">
                'A thunk is a function that wraps an expression to delay its evaluation'
              </a>
            </li>
            <li class="fragment">
              Middleware ist ein fortgeschrittenes Feature und meistens gen√ºgt die Thunk Middleware
            </li>
          </ul>
        </section>

        <section>
          <h3>Reducers enthalten die Kern-(Business)-Logik</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import {combineReducers} from 'redux';

// http://redux.js.org/docs/api/combineReducers.html
export const rootReducer = combineReducers({
greetings, // updates greeting partial state
filter,
mode
});
    </code></pre>
          <ul>
            <li class="fragment">
              Reducer sind pure Funktionen, die den alten Zustand und eine Action bekommen und einen
              neuen Zustand erzeugen
            </li>
            <li class="fragment">Oft bearbeitet ein Reducer nur einen Teil des Zustands</li>
          </ul>
        </section>

        <section>
          <h3>Teil-Reducer</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
const mode = (state = MODE_MASTER, action) => {
switch (action.type) {
    case SET_MODE:
        return action.mode;
    default:
        return state;
}
};
    </code></pre>
          <ul>
            <li class="fragment">
              Initialisiert seinen Teilzustand (oft mit einem Default-Parameter)
            </li>
            <li class="fragment">√Ñndert niemals zustand direkt</li>
            <li class="fragment">
              Sondern liefert einen neuen Zustand (manchmal teilweise als Kopie)
            </li>
          </ul>
        </section>

        <section>
          <h3>useSelector: Auf den globalen Zustand zugreifen</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
import { useSelector } from 'react-redux';

function GreetingController() {
  const mode = useSelector(state => state.mode);
  ...
}
</code></pre>
        </section>
        <section>
          <h3>useDispatch: Actions ausl√∂sen</h3>
          <pre class="fragment"><code class="typescript line-numbers" contenteditable data-trim>
      import { useDispatch } from 'react-redux';
      
      import * as actions from './actions';
      
      function GreetingController() {
        const dispatch = useDispatch();

        async function addGreeting(greetingToBeAdded) {
          await dispatch(actions.saveGreetingToServer(greetingToBeAdded));
        }
        ...
      }
    </code></pre>
        </section>

        <section>
          <h2>Zusammenfassung Redux-Architektur</h2>
          <img
            src="slides/images/redux-03-resulting-redux-architecture.png"
            style="max-height:650px"
          />
        </section>

        <section>
          <h3>Lokaler State ist weiterhin erlaubt!</h3>
          <p>Es gibt unterschiedliche Arten von "State"</p>

          <img src="slides/images/three-kinds-of-state.png" style="max-height:650px" />
        </section>

        <section>
          <h2>Geschafft ;-)</h2>
          <h3>Vielen Dank f√ºr Eure Teilnahme!</h3>
          <p>
            Kontakt: <a href="mailto:nils@nilshartmann.net">nils@nilshartmann.net</a> |
            <a href="https://xing.to/nilshartmann" target="_blank">Xing</a> |
            <a href="https://twitter.com/nilshartmann" target="_blank">@nilshartmann</a>
          </p>
        </section>
      </div>
    </div>

    <script src="slides/reveal.js/lib/js/head.min.js"></script>
    <script src="slides/reveal.js/js/reveal.js"></script>
    <script src="slides/reveal.js/lib/jquery-2.2.4.js"></script>
    <script src="slides/reveal-config.js"></script>
  </body>
</html>
